import"./plugins3.js";import{l as t,g as e,a as o,b as a}from"./utils.js";import{a as r}from"./feature-flags.js";import{g as n}from"./lang-terms.js";import{a as s,B as i,x as l}from"./lit-element.js";import{E as c}from"./index7.js";import{g as d}from"./lazy-instantiator.js";import{t as u}from"./plugins.js";import"./colors.js";import"./icon.js";import"./typography.js";import{D as p}from"./d2l-practice.js";import"./flags.js";import"./icon-styles.js";import"./directive.js";import"./unsafe-svg.js";import"./async-directive.js";import"./styles.js";import"./css.js";import"./svg-to-css.js";import"./localizer3.js";import"./localize-mixin.js";import"./_rollupPluginBabelHelpers.js";import"./localize.js";import"./common.js";import"./core.js";import"./index2.js";import"./if-defined.js";import"./dedupeMixin.js";const f=t.debug("error-handler");f("Loading error-handler module.");const m=new Map([]);const y=[{oldName:"--primary",newName:"--d2l-cplus-color-primary"},{oldName:"--primary-dark",newName:"--d2l-cplus-color-primary-dark"},{oldName:"--neutral-one-head",newName:"--d2l-cplus-color-neutral-one-head"},{oldName:"--font-family-one",newName:"--d2l-cplus-font-family-one"}];const g=t.debug("setup:accordions");function b(t,e){try{if(!t)return g("setupAccordion did not receive an accordion.");if(1!==t.nodeType)return g("the received accordion is not a DOM element.");const o=document.createElement("d2l-cplus-accordion"),a=t.closest("div.d2l-element"),r={};r.dataIdx=a.getAttribute("data-idx"),r.dataType=a.getAttribute("data-type"),r.role=a.getAttribute("role"),r.ariaDescribedby=a.getAttribute("aria-describedby");const n=a.querySelector(".sr-only");r.srOnlyInnerText=n?n.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.dataset.id=e;const s=a.querySelector(".instruction");o.dataset.instructions=s?s.textContent:"";const i=t.querySelectorAll(".card"),l=[];for(const[t,e]of i.entries()){const o={id:t},a=e.querySelector(".card-title");o.title=a&&a.textContent?a.textContent:"";const r=e.querySelector(".card-body");o.content=r&&r.innerHTML?r.innerHTML:"",l.push(o)}o.dataset.type=r.dataType,o.dataset.panels=JSON.stringify(l),o.setAttribute("data-rs-shadow-root",!0),a.after(o),a.remove()}catch(t){g("setupAccordion failed to create an element.",t)}}g("Loading accordions module.");const h=t.debug("setup:callouts");function w(t,e){h("Starting setupCalloutComponent.");try{if(!t)return h("setupCalloutComponent did not receive a callout element.");if(1!==t.nodeType)return h("the received callout element is not a DOM element.");const o=document.createElement("d2l-cplus-callout"),a=t.closest("div.d2l-element"),r={};r.dataIdx=a.getAttribute("data-idx"),r.dataType=a.getAttribute("data-type"),r.role=a.getAttribute("role"),r.ariaDescribedby=a.getAttribute("aria-describedby");const n=a.querySelector(".sr-only");r.srOnlyInnerText=n?n.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.style.display="block",o.dataset.id=e,o.dataset.type=a.getAttribute("data-type");const s=t.querySelector(".card-text >*:nth-child(2), .jumbotron >*:nth-child(2)");o.dataset.content=JSON.stringify(s&&s.innerHTML?s.innerHTML:"");const i=t.querySelector(".card-text >*:first-child, .jumbotron >*:first-child");i.style.textTransform="none",o.dataset.title=i&&i.textContent?i.textContent:"",o.setAttribute("data-rs-shadow-root",!0),a.after(o),a.remove()}catch(t){h("setupCalloutComponent failed to create an element.",t)}}h("Loading callouts module.");const v=t.debug("setup:click-to-reveals");function S(t,e){v("Starting setupClickToRevealComponent.");try{if(!t)return v("setupClickToRevealComponent did not receive a click to reveal element.");if(1!==t.nodeType)return v("the received click to reveal element is not a DOM element.");const o=document.createElement("d2l-cplus-click-to-reveal"),a=t.closest("div.d2l-element"),r={};r.dataIdx=a.getAttribute("data-idx"),r.dataType=a.getAttribute("data-type"),r.role=a.getAttribute("role"),r.ariaDescribedby=a.getAttribute("aria-describedby");const n=a.querySelector(".sr-only");r.srOnlyInnerText=n?n.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.style.display="block",o.dataset.id=e,o.dataset.type=a.getAttribute("data-type");const s=t.querySelector("button"),i=s?s.textContent:"";o.dataset.buttonRevealLabel=i.split("||").shift(),o.dataset.buttonHideLabel=i.split("||").pop();const l=t.querySelector(".card-text > p:first-of-type");o.dataset.introText=l?l.textContent:"";const c=t.querySelector(".card-text > p.instruction");o.dataset.instructions=c?c.textContent:"";const d=t.querySelector(".card-text > .collapse > div"),u=d&&d.innerHTML?d.innerHTML:"";o.dataset.revealedContent=JSON.stringify(u),o.setAttribute("data-rs-shadow-root",!0),a.after(o),a.remove()}catch(t){v("setupClickToRevealComponent failed to create an element.",t)}}v("Loading click-to-reveals module.");const x=t.debug("setup:carousel");async function C(t,e){try{if(!t)return x("setupCarousel did not receive a carousel.");if(1!==t.nodeType)return x("the received carousel is not a DOM element.");const o=document.createElement("d2l-cplus-carousel"),a=t.closest("div.d2l-element"),r={};r.dataIdx=a.getAttribute("data-idx"),r.dataType=a.getAttribute("data-type"),r.role=a.getAttribute("role"),r.ariaDescribedby=a.getAttribute("aria-describedby");const n=a.querySelector(".sr-only");r.srOnlyId=n?n.getAttribute("aria-describedby"):"",r.srOnlyInnerText=n?n.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.dataset.id=e;const s=a.querySelector(".instruction");o.dataset.instruction=s?s.textContent:"",a.querySelector(".instruction").innerHTML="";const i=t.querySelectorAll(".d2l-cplus-carousel-slide"),l=[];for(const[t,e]of i.entries()){const o={id:t},a=e.querySelector(".d2l-cplus-carousel-slide-title");o.title=a&&a.textContent?a.textContent:"";const r=e.querySelector(".d2l-cplus-carousel-slide-image");if(r){const t=r.getAttribute("src"),e=r.getAttribute("alt");if(!t)return x("Could not find src attribute on image tag.");if("string"!=typeof t)return x("Value of src attribute was not a string.");o.image=t,o.alt=e||""}else o.image="",o.alt="";const n=e.querySelector(".d2l-cplus-carousel-slide-text");o.text=n&&n.innerHTML?n.innerHTML:"",l.push(o)}o.dataset.slides=JSON.stringify(l),o.setAttribute("data-rs-shadow-root",!0),a.after(o),a.remove()}catch(t){x("setupCarousel failed to create an element.",t)}}x("Loading carousel module.");const A=t.debug("setup:flipcards");function L(t,e){A("Starting setupFlipcardsComponent.");try{if(!t)return A("setupFlipcardsComponent did not receive a flipcards element.");if(1!==t.nodeType)return A("the received flipcards element is not a DOM element.");const o=document.createElement("d2l-cplus-flipcards"),a=t.closest("div.d2l-element"),r={};r.dataIdx=a.getAttribute("data-idx"),r.dataType=a.getAttribute("data-type"),r.role=a.getAttribute("role"),r.ariaDescribedby=a.getAttribute("aria-describedby");const n=a.querySelector(".sr-only");r.srOnlyInnerText=n?n.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.style.display="block",o.dataset.id=e;const s=a.querySelector(".instruction");o.dataset.instructions=s?s.textContent:"",o.dataset.maxcards=t.getAttribute("data-maxcards");const i=t.querySelectorAll(".d2l-flip-card"),l=[];for(const t of i){const e=t.style.gridRowStart-1,o={},a=t.querySelector('.d2l-flip-card-front-body > *[data-flipcardprop*="frontCardTitle"]');o.frontTitle=a?a.textContent.trim():"";const r=t.querySelector(".d2l-flip-card-front-body p");o.frontText=r?r.textContent.trim():"";const n=t.querySelector(".d2l-flip-card-front img");o.frontImage={url:n?n.getAttribute("src"):"",alt:n?n.getAttribute("alt"):""};const s=t.querySelector('.d2l-flip-card-back-body > *[data-flipcardprop*="backCardTitle"]');o.backTitle=s?s.textContent.trim():"";const i=t.querySelector(".d2l-flip-card-back-body p");o.backText=i?i.textContent.trim():"";const c=t.querySelector(".d2l-flip-card-back img");o.backImage={url:c?c.getAttribute("src"):"",alt:c?c.getAttribute("alt"):""},l[e]||(l[e]=[]),l[e]=[...l[e],o]}o.dataset.rows=JSON.stringify(l),o.setAttribute("data-rs-shadow-root",!0),a.after(o),a.remove()}catch(t){A("setupFlipcardsComponent failed to create an element.",t)}}A("Loading flipcards module.");const T=t.debug("setup:hotspots");T("Loading hotspots module.");const q=t.debug("module");function D(t,e){q("Starting processStylizedQuoteComponent.");try{if(!t)return q("setupStylizedQuoteComponent did not receive a stylized quote element.");if(1!==t.nodeType)return q("the received stylized quote element is not a DOM element.");const o=document.createElement("d2l-cplus-stylized-quote"),a=t.closest("div.d2l-element"),r={};r.dataIdx=a.getAttribute("data-idx"),r.dataType=a.getAttribute("data-type"),r.role=a.getAttribute("role"),r.ariaDescribedby=a.getAttribute("aria-describedby");const n=a.querySelector(".sr-only");r.srOnlyInnerText=n?n.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.style.display="block",o.dataset.id=e,o.dataset.type=a.getAttribute("data-type");const s=t.querySelector("blockquote > p");o.dataset.quotation=s&&s.textContent?s.textContent:"";const i=t.querySelector("blockquote > footer");o.dataset.attribution=i&&i.textContent?i.textContent:"",o.setAttribute("data-rs-shadow-root",!0),a.after(o),a.remove()}catch(t){q("setupStylizedQuoteComponent failed to create an element.",t)}}q("Loading quotes module.");const j=t.debug("setup:tabs");async function O(t,e){try{if(!t)return j("setupTabsWrapper did not receive a tabsWrapper.");if(1!==t.nodeType)return j("the received tabsWrapper is not a DOM element.");const o=document.createElement("d2l-cplus-tabs-container"),a=t.closest("div.d2l-element"),r={};r.dataIdx=a.getAttribute("data-idx"),r.dataType=a.getAttribute("data-type"),r.role=a.getAttribute("role"),r.ariaDescribedby=a.getAttribute("aria-describedby"),o.dataset.wrapperData=JSON.stringify(r),o.dataset.id=e;const n=a.querySelector(".instruction");o.dataset.instruction=n?n.textContent:"",a.querySelector(".instruction").innerHTML="";const s=t.querySelectorAll(".list-group-item"),i=t.querySelectorAll(".tab-pane"),l=[];for(let t=0;t<s.length;t++){const o={id:e};let a=s[t].querySelectorAll('span[data-itemprop$="0"]')[0];if(!a&&s[t].hasAttribute("data-itemprop")){const e=s[t].getAttribute("data-itemprop");"0"===e.substr(e.length-1)&&(a=s[t])}o.title=a&&a.textContent?a.textContent:"";const r=s[t].querySelectorAll("img")[0];o.imageSrc=r&&r.getAttribute("src")?r.getAttribute("src"):"",o.imageAlt=r&&r.getAttribute("alt")?r.getAttribute("alt"):"",o.content=i[t]&&i[t].innerHTML&&""!==i[t].innerHTML.replace(/(<p[^>]+?>|<p>|<\/p>)/gi,"").trim()?i[t].innerHTML:"",l.push(o)}o.dataset.type=r.dataType,o.dataset.tabsData=JSON.stringify(l),o.setAttribute("data-rs-shadow-root",!0),a.after(o),a.remove()}catch(t){j("setupTabsWrapper failed to create an element.",t)}}j("Loading tabs module.");const k=t.debug("setup:timelines");async function I(t,e){try{if(!t)return k("setupTimeline did not receive a timeline.");if(1!==t.nodeType)return k("the received timeline is not a DOM element.");const o=document.createElement("d2l-cplus-timeline"),a=t.closest("div.d2l-element"),r={};r.dataIdx=a.getAttribute("data-idx"),r.dataType=a.getAttribute("data-type"),r.role=a.getAttribute("role"),r.ariaDescribedby=a.getAttribute("aria-describedby"),o.dataset.wrapperData=JSON.stringify(r),o.dataset.id=e;const n=t.querySelectorAll(".timeline-panel"),s=[];for(const[t,e]of n.entries()){const o={id:t},a=e.querySelector(".timeline-heading");o.title=a&&a.textContent?a.textContent:"";const r=e.querySelector(".timeline-body > [data-itemprop]");o.content=r&&r.innerHTML&&""!==r.innerHTML.replace(/(<p[^>]+?>|<p>|<\/p>)/gi,"").trim()?r.innerHTML:"",s.push(o)}o.dataset.type=r.dataType,o.dataset.panels=JSON.stringify(s),o.setAttribute("data-rs-shadow-root",!0),a.after(o),a.remove()}catch(t){k("setupTimeline failed to create an element.",t)}}k("Loading timelines module.");const N=t.debug("elements");N("Loading elements module."),function(){const t=new FontFace("Lato","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/Lato-400.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/Lato-400.woff) format(woff)",{style:"normal",weight:"400"});document.fonts.add(t),t.load();const e=new FontFace("Lato","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/Lato-700.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/Lato-700.woff) format(woff)",{style:"normal",weight:"700"});document.fonts.add(e),e.load();const o=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Light.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Light.woff) format(woff)",{style:"normal",weight:"300"});document.fonts.add(o),o.load();const a=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Regular.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Regular.woff) format(woff)",{style:"normal",weight:"400"});document.fonts.add(a),a.load();const r=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Bold.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Bold.woff) format(woff)",{style:"normal",weight:"700"});document.fonts.add(r),r.load();const n=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-LightItalic.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-LightItalic.woff) format(woff)",{style:"italic",weight:"300"});document.fonts.add(n),n.load();const s=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Italic.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Italic.woff) format(woff)",{style:"italic",weight:"400"});document.fonts.add(s),s.load();const i=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-BoldItalic.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-BoldItalic.woff) format(woff)",{style:"italic",weight:"700"});document.fonts.add(i),i.load()}();let M;const H=s(M||(M=(t=>t)`.d2l-cplus-layout{container-name:d2l-cplus-layout;container-type:inline-size;display:grid;grid-template-rows:auto;margin-block:0;margin-inline:calc(var(--d2l-cplus-size-base, 18px)*-1);min-height:30px;width:calc(100% + 2*var(--d2l-cplus-size-base, 18px))}.d2l-cplus-layout::after{clear:both;content:" ";display:block;height:0;visibility:hidden}.d2l-cplus-layout-column{padding-block:0;padding-inline:var(--d2l-cplus-size-base, 18px);word-wrap:break-word}.d2l-cplus-layout-half{grid-template-columns:repeat(2, 50%)}.d2l-cplus-layout-thirds{grid-template-columns:repeat(3, minmax(33%, 1fr))}.d2l-cplus-layout-one-third{grid-template-columns:minmax(33%, 1fr) minmax(66%, 1fr)}.d2l-cplus-layout-two-third{grid-template-columns:minmax(66%, 2fr) minmax(33%, 1fr)}.d2l-cplus-layout iframe{max-width:100%}@container d2l-cplus-layout (width <= 822px){.d2l-cplus-layout-column{padding-inline:var(--d2l-cplus-size-small-1, 12px)}.d2l-cplus-layout-column:first-of-type{padding-inline-start:var(--d2l-cplus-size-base, 18px)}.d2l-cplus-layout-column:last-of-type{padding-inline-end:var(--d2l-cplus-size-base, 18px)}}@container d2l-cplus-layout (width <= 546px){.d2l-cplus-layout-column{grid-column:1/-1;padding-inline:var(--d2l-cplus-size-base, 18px)}}
`)),F=t.debug("setup:layouts");async function B(t){F("Starting setupLayouts.");try{if(!t||t.length<1)return F("setupLayouts found no layouts.");for(const e of t)e.style.opacity=0;!function(){try{F("Stating addStyles.");const t=document.createElement("style");t.innerHTML=H.cssText,document.head.appendChild(t)}catch(t){F("addStyle failed unexpectedly.",t)}}()}catch(t){F("setupLayouts failed unexpectedly",t)}finally{for(const e of t)e.style.opacity=1}}F("Loading layouts module.");const P=t.debug("layouts");P("Loading layouts module.");const z=async function(t,e,o){const a={headers:{Authorization:`Bearer ${e}`}};try{const e=t.getLinkByRel("https://activity.api.brightspace.com/rels/assigned-activities");if(!e)return{};const n=new c(await(await fetch(e.href,a)).json()),s=n.getActionByName("create-assigned-activity");if(n.entities||(o=!0),s&&o){var r;const t={};s.fields.forEach(e=>{e.value&&(t[e.name]=e.value)});const o=(await fetch(s.href,{method:s.method,body:new URLSearchParams(t),headers:{"Content-Type":null!==(r=s.type)&&void 0!==r?r:"application/x-www-form-urlencoded;charset=UTF-8"},...a})).headers.get("Content-Location");return{attempt:new c(await(await fetch(o,a)).json()),assignedActivitiesList:e}}if(n.entities&&n.entities.length>0){return{attempt:new c(await(await fetch(n.entities[0].href,a)).json()),assignedActivitiesList:e}}}catch{return{}}};let E,J,U=t=>t;customElements.define("d2l-practice-error",class extends p{static get styles(){return s(E||(E=U`
		:host {
			all: initial;
			color: #494c4e;
			display: inline-block;
			font-family: "Lato", sans-serif;
			font-size: 0.8rem;
			line-height: 1.5;
			overflow: hidden;
			width: 100%;
		}

		:host([hidden]) {
			display: none;
		}

		.d2l-error-contain {
			align-items: center;
			background-color: var(--d2l-color-celestine-plus-2);
			border: 1px solid var(--d2l-color-mica);
			border-radius: 6px;
			display: flex;
			flex-direction: column;
			justify-content: center;
			overflow: hidden;
			padding: 18px;
		}

		d2l-icon {
			margin-top: 0.83em;
		}`))}render(){return l(J||(J=U`
			<div class="d2l-error-contain">
				<d2l-icon icon="tier3:alert"></d2l-icon>
				<h2>${0}</h2>
			</div>
		`),this.localize("practice:learner:general:errorLoadingPractice"))}});const R=t.debug("practices");R("Loading practices.js"),window.D2L=window.D2L||{},window.D2L.Creator={convertElements:async function(t,o,a){var s;if(N("Starting convertElements"),t&&!(t.length<1)){var i;if(document.querySelector("html").setAttribute("data-mathjax-context",JSON.stringify({outputScale:1.5})),null!==(s=window)&&void 0!==s&&null!==(s=s.D2L)&&void 0!==s&&s.Pulse)o=null===(i=window)||void 0===i||null===(i=i.D2L)||void 0===i||null===(i=i.Pulse)||void 0===i?void 0:i.orgUnitId,a=await e(o);window.D2L.Creator.Context=window.D2L.Creator.Context||{},window.D2L.Creator.Context={OrgUnitId:o,OrgUnitPath:a},window.D2L.Creator.Flags=window.D2L.Creator.Flags||{},window.D2L.Creator.Flags.Elements=function(){let t;try{return t=r(m),t}catch{return m}}(),f("Registering error handler."),window.addEventListener("error",t=>{f(`CPlusError: ${t.type}: ${t.message}`),t.stopPropagation(),t.preventDefault()}),function(){for(const t of y){const e=getComputedStyle(document.documentElement).getPropertyValue(t.oldName);e&&document.documentElement.style.setProperty(t.newName,e)}}(),async function(){j("Starting setupTabs.");const t=document.querySelectorAll(".d2l-element > .tabs-wrapper");if(!t||t.length<1)return j("setupTabs found no tabs.");try{for(const e of t)e.closest(".d2l-element").style.opacity=0;await import("./tabs.js");for(const[e,o]of t.entries())O(o,e)}catch(t){j("setupTabs failed unexpectedly",t)}}(),async function(){try{const t=document.querySelectorAll(".d2l-element:not(.d2l-tabccordion) > .accordion");if(!t||t.length<1)return g("setupAccordions found no accordions.");for(const e of t)e.closest("div.d2l-element").style.opacity=0;await import("./accordion.js");for(const[e,o]of t.entries())b(o,e)}catch(t){g("setupAccordions failed unexpectedly",t)}}(),async function(){try{const t=document.querySelectorAll(".d2l-element > .card.card-reveal");if(!t||t.length<1)return v("setupCardReveals found no click to reveals");for(const e of t)e.closest(".d2l-element").style.opacity=0;await import("./click-to-reveal.js");for(const[e,o]of t.entries())S(o,e)}catch(t){v("setupCardReveals failed unexpectedly",t)}}(),async function(){try{const t=document.querySelectorAll(".d2l-flip-card-wrapper");if(!t||t.length<1)return A("setupFlipcards found no flipcards");for(const e of t)e.closest(".d2l-element").style.opacity=0;await import("./flipcards.js");for(const[e,o]of t.entries())L(o,e)}catch(t){A("setupFlipcards failed unexpectedly",t)}}(),async function(){const t=document.querySelectorAll(".d2l-element > .card:not(.card-reveal), .d2l-element > .jumbotron");try{if(!t||t.length<1)return h("setupCallouts found no callouts");for(const e of t)e.closest(".d2l-element").style.opacity=0;await import("./callout.js");for(const[e,o]of t.entries())w(o,e)}catch(t){h("setupCallouts failed unexpectedly",t)}finally{for(const e of t)e.closest(".d2l-element").style.opacity=1}}(),async function(){k("Starting setupTimelines.");const t=document.querySelectorAll(".d2l-element .timeline");if(!t||t.length<1)return k("setupTimelines found no timelines.");try{for(const e of t)e.closest(".d2l-element").style.opacity=0;await import("./timeline.js");for(const[e,o]of t.entries())I(o,e)}catch(t){k("setupTimelines failed unexpectedly",t)}finally{const t=document.querySelectorAll("d2l-cplus-timeline");for(const e of t)e.closest(".d2l-element").style.opacity=1}}(),async function(){T("Starting setupHotspots.");const t=document.querySelectorAll(".d2l-hotspot");try{const e=document.querySelector("html").hasAttribute("lang")?document.querySelector("html").getAttribute("lang"):"en-us",o=await n(e);if(o||T("Unable to get language terms."),"object"!=typeof o&&T("Unexpected value for langTerms object."),!t||t.length<1)return T("setupHotspots found no containers.");for(const e of t)e.closest(".d2l-element").style.opacity=0;await import("./hotspot.js");for(const e of t)try{if(!e.getAttribute("data-element-data")&&!e.getAttribute("data-properties"))return T("Could not find necessary data for the interactive.");const t={},a=e.closest(".d2l-element");t.dataIdx=a.getAttribute("data-idx"),t.dataType=a.getAttribute("data-type"),t.role=a.getAttribute("role"),t.ariaDescribedby=a.getAttribute("aria-describedby");const r=a.querySelector(".sr-only");t.srOnlyId=r?r.getAttribute("id"):"",t.srOnlyInnerText=r?r.textContent:"";const n=e.querySelector("img");if(!n)return T("Could not find required image tag.");const s=n.getAttribute("src");if(!s)return T("Could not find src attribute on image tag.");if("string"!=typeof s)return T("Value of src attribute was not a string.");let i;if(e.hasAttribute("data-element-data"))try{i=decodeURIComponent(e.getAttribute("data-element-data"))}catch(t){T("setupHotspots failed to decode data-element-data attribute string.",t)}else if(e.hasAttribute("data-properties"))try{i=decodeURIComponent(window.atob(e.getAttribute("data-properties")))}catch(t){T("setupHotspots failed to decode data-properties attribute string.",t),i=window.atob(e.getAttribute("data-properties"))}if("string"!=typeof i)return T("Value of data-properties attribute was not a string.");const l=document.createElement("d2l-cplus-hotspot");l.dataset.activity=i,l.dataset.image=s,l.dataset.langTerms=JSON.stringify(o),l.dataset.wrapper=JSON.stringify(t),l.setAttribute("data-rs-shadow-root",!0),e.closest("div.d2l-element").after(l),e.closest("div.d2l-element").remove()}catch(t){T("setupHotspots failed to create an element.",t)}}catch(t){T("setupHotspots failed unexpectedly",t)}finally{for(const e of t)e.closest(".d2l-element").style.opacity=1}}(),async function(){try{const t=document.querySelectorAll(".d2l-cplus-carousel");if(!t||t.length<1)return x("setupCarousels found no carousels.");for(const e of t)e.closest(".d2l-element").style.opacity=0;await import("./carousel.js");for(const[e,o]of t.entries())C(o,e)}catch(t){x("setupCarousels failed unexpectedly",t)}finally{const t=document.querySelectorAll("d2l-cplus-carousel");for(const e of t)e.closest(".d2l-element").style.opacity=1}}(),async function(){const t=document.querySelectorAll(".d2l-element > .blockquote");try{if(!t||t.length<1)return q("setupStylizedQuotes found no stylized quotes");for(const e of t)e.closest(".d2l-element").style.opacity=0;await import("./stylized-quote.js");for(const[e,o]of t.entries())D(o,e)}catch(t){q("setupStylizedQuotes failed unexpectedly",t)}}()}},convertLayouts:function(t){P("Starting convertLayouts"),B(t)},convertPractices:async function(t,r,n){var s,i;if(R("Starting convertPractices."),!t||t.length<1)return;null!==(s=window)&&void 0!==s&&null!==(s=s.D2L)&&void 0!==s&&s.Pulse&&(r=null===(i=window)||void 0===i||null===(i=i.D2L)||void 0===i||null===(i=i.Pulse)||void 0===i?void 0:i.orgUnitId,n=await e(r)),window.D2L.Creator.Context=window.D2L.Creator.Context||{},window.D2L.Creator.Context={OrgUnitId:r,OrgUnitPath:n};const l=[];for(let e=0;e<t.length;e++){const o=t[e],a=o.querySelector("iframe[data-file]"),r=o.querySelector("div.placeholder");if(r&&(r.style.display="none"),a){a.style.border="none";const t=a.src||a.getAttribute("data-src"),e=new URLSearchParams(t).get("t");if(e){if(a.setAttribute("data-type",e),l.includes(e))continue;l.push(parseInt(e))}a.setAttribute("data-src",a.src),a.removeAttribute("src"),a.style.height=0}}for(const t of l){const e=document.querySelectorAll(`.d2l-practice iframe[data-type="${t}"]`);if(await o(t))for(const o of e){let e=o.getAttribute("data-file");if(e){e.includes("practice/")||(e=`practice/${e}`);try{const r=await fetch(`${window.D2L.Creator.Context.OrgUnitPath}${e}`).then(t=>t.json()),n=a(t),s=document.createElement(n);o.parentNode.appendChild(s),s.practiceData=r,s.setAttribute("data-rs-shadow-root",!0),o.remove()}catch{try{const r=await fetch(`${e}`).then(t=>t.json()),n=a(t),s=document.createElement(n);o.parentNode.appendChild(s),s.practiceData=r,s.setAttribute("data-rs-shadow-root",!0),s.setAttribute("practice-lor",""),o.remove()}catch{const t=document.createElement("d2l-practice-error");o.replaceWith(t)}}}}else for(const t of e)t.setAttribute("src",t.getAttribute("data-src")),t.removeAttribute("data-src"),t.style.display="block",t.style.overflowY="hidden",t.style.height="auto"}},convertPracticeActivities:async function(o,a,r,n=!1){var s;const l=t.debug("practices-activities");if(l("Starting convertPracticeActivities."),!o||o.length<1)return;l(`convertPracticeActivities is converting ${o.length} Practice(s).`),o.forEach(t=>{const e=t.querySelector("iframe[data-file]"),o=t.querySelector("div.placeholder");o&&(o.style.display="none"),e&&(e.style.border="none",e.setAttribute("data-src",e.src),e.removeAttribute("src"),e.style.height=0)});const p=u("practices-activity-display","registry");let f;p&&await p.getModule();const m=u("practices-activity-display","provider-framework-utils");var y;let g;m&&(f=await m.getModule()),null!==(s=window)&&void 0!==s&&null!==(s=s.D2L)&&void 0!==s&&s.Pulse&&(a=null===(y=window)||void 0===y||null===(y=y.D2L)||void 0===y||null===(y=y.Pulse)||void 0===y?void 0:y.orgUnitId,r=await e(a)),window.D2L.Creator.Context=window.D2L.Creator.Context||{},window.D2L.Creator.Context={OrgUnitId:a,OrgUnitPath:r};let b=!1;for(const t of o){const e=t.attributes["data-d2l-activity-href"].value,o=t.innerHTML,a=t.querySelector("iframe[data-file]");a&&a.remove();try{const a=`${e.split("?").shift()}?ou=${window.D2L.Creator.Context.OrgUnitId}`,r=c(await(await window.top.d2lfetch.fetch(`${a}`)).json());void 0===g&&(g=localStorage["D2L.Fetch.Tokens"]&&JSON.parse(localStorage["D2L.Fetch.Tokens"])["*:*:*"]&&JSON.parse(localStorage["D2L.Fetch.Tokens"])["*:*:*"].access_token||void 0);let s=r;const l=await d(r,g,window.D2L.Creator.Context.OrgUnitId);if(l){const t=await z(l,g,n);s=t&&t.attempt||s}const u=await f(s.links,{type:"practice-activity",token:g});if(void 0===u)b=!0,t.innerHTML=o;else{var h;const e=u&&(null!==(h=u.contentDoing)&&void 0!==h?h:u.contentPrimary)||null;e?i(e,t):(b=!0,t.innerHTML=o)}}catch{b=!0,t.innerHTML=o}}if(b){const t=document.querySelectorAll(".d2l-practice");window.D2L.Creator.convertPractices(t,a,r)}},wrapTables:function(t){if(t&&!(t.length<1))for(const e of t){const t=document.createElement("div"),o=e.parentNode;o.classList.contains("table-responsive")||(t.classList.add("table-wrapper"),o.insertBefore(t,e),t.appendChild(e))}}};
